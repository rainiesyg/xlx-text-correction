# 心连心文本纠错小程序

## 项目简介

心连心文本纠错小程序是一个专为广西心连心公司员工内部使用的在线文本纠错web应用。系统集成了科大讯飞的文本纠错API，支持文本输入和文档上传两种纠错方式，能够智能识别和纠正中文文本中的错别字、语法错误、标点符号问题等。

## 功能特性

### 🎯 核心功能
- **文本输入纠错**：支持直接输入文本进行纠错，最大支持2000字符
- **文档上传纠错**：支持上传 .txt、.doc、.docx、.pdf 格式文档
- **智能纠错**：基于科大讯飞API的专业文本纠错能力
- **文本对比**：智能文本差异对比，支持行级和字符级差异高亮
- **结果对比**：提供原文与纠错后文本的对比显示
- **详细报告**：显示具体的错误类型和修正建议

### 🎨 界面特色
- **现代化设计**：采用渐变色彩和卡片式布局
- **响应式界面**：完美适配桌面端和移动端
- **直观操作**：标签页切换，拖拽上传等便捷功能
- **实时反馈**：字符计数、加载状态、消息提示
- **友好提示**：完善的错误提示和用户反馈系统

### 🔧 技术特性
- **模块化架构**：采用ES6+模块化设计，代码结构清晰
- **依赖注入**：先进的依赖容器管理，支持服务注册和生命周期管理
- **智能缓存**：内置缓存管理，提升响应速度
- **错误处理**：完善的错误处理和用户反馈系统
- **用户体验**：进度条、实时反馈、统计面板等增强功能
- **测试支持**：内置测试管理器，支持自动化测试
- **文档生成**：自动生成API文档和使用说明
- **工具集成**：集成多种实用工具，提升开发效率

### 📊 新增工具模块
- **文本对比工具**：智能识别文本差异，支持修改、新增、删除的可视化显示
- **事件总线**：模块间通信管理，支持事件发布订阅
- **依赖容器**：服务注册和依赖注入管理
- **工具控制器**：统一的工具管理和切换界面

## 技术栈

### 后端
- **Node.js** - 服务器运行环境
- **Express.js** - Web框架
- **Multer** - 文件上传处理
- **Mammoth** - Word文档解析
- **PDF-Parse** - PDF文档解析
- **Axios** - HTTP客户端

### 前端架构
- **HTML5** - 页面结构
- **CSS3** - 样式设计（渐变、动画、响应式）
- **JavaScript ES6+** - 模块化架构
- **Font Awesome** - 图标库

### 核心模块
- **APIClient** - API通信管理
- **TextProcessor** - 文本处理引擎
- **UIManager** - 界面管理器
- **ErrorHandler** - 错误处理系统
- **CacheManager** - 缓存管理
- **UserExperienceManager** - 用户体验增强
- **TestManager** - 测试管理器
- **DocumentationGenerator** - 文档生成器
- **TextDiffModule** - 文本对比模块
- **EventBus** - 事件总线
- **DependencyContainer** - 依赖注入容器
- **ToolsController** - 工具控制器

### API集成
- **科大讯飞文本纠错API** - 核心纠错服务

## 安装部署

### 环境要求
- Node.js 14.0 或更高版本
- npm 6.0 或更高版本

### 本地开发部署

#### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd traeint_resp
```

2. **安装依赖**
```bash
npm install
```

3. **配置API密钥**
项目中已配置科大讯飞API密钥：
- APPID: 27d422bd
- APISecret: NjRmZjM4NGUzZGFkNTUxZjM3NzQxYjJh
- APIKey: f362096d765f0452321a6f4c51a5d735

4. **启动服务**
```bash
# 生产环境
npm start

# 开发环境（自动重启）
npm run dev

# 运行测试
npm run test

# 生成文档
npm run docs

# 清理上传文件
npm run clean

# 健康检查
npm run health
```

5. **访问应用**
打开浏览器访问：http://localhost:3003

### Zeabur云端部署

#### 快速部署

1. **准备代码仓库**
```bash
# 确保代码已推送到Git仓库（GitHub、GitLab等）
git add .
git commit -m "准备Zeabur部署"
git push origin main
```

2. **登录Zeabur控制台**
- 访问 [Zeabur控制台](https://zeabur.com)
- 使用GitHub/GitLab账号登录

3. **创建新项目**
- 点击「New Project」创建新项目
- 选择你的代码仓库
- Zeabur会自动检测到Node.js项目

4. **配置环境变量**
在Zeabur项目设置中添加以下环境变量：
```
NODE_ENV=production
PORT=3003
IFLYTEK_APPID=27d422bd
IFLYTEK_API_SECRET=NjRmZjM4NGUzZGFkNTUxZjM3NzQxYjJh
IFLYTEK_API_KEY=f362096d765f0452321a6f4c51a5d735
```

5. **部署配置**
- Zeabur会自动读取项目根目录的 `zeabur.json` 配置文件
- 构建命令：`npm install`
- 启动命令：`npm start`
- 端口：3003

6. **访问应用**
- 部署完成后，Zeabur会提供一个公网访问地址
- 格式通常为：`https://your-project-name.zeabur.app`

#### 部署特性
- **自动构建**：代码推送后自动触发构建和部署
- **零配置**：基于 `zeabur.json` 自动配置
- **HTTPS支持**：自动提供SSL证书
- **全球CDN**：快速访问体验
- **健康检查**：自动监控服务状态
- **日志查看**：实时查看应用日志

#### 环境变量配置
项目包含 `.env.example` 文件，包含所有必要的环境变量配置示例：
- 复制 `.env.example` 为 `.env`
- 在Zeabur控制台中配置相应的环境变量
- 确保API密钥等敏感信息安全配置

#### 域名绑定（可选）
- 在Zeabur项目设置中可以绑定自定义域名
- 支持自动SSL证书配置
- 支持多域名绑定

#### 监控和日志
- Zeabur提供实时日志查看功能
- 支持应用性能监控
- 提供访问统计和错误追踪

## 使用说明

### 文本输入纠错
1. 选择「文本输入」标签页
2. 在文本框中输入需要纠错的内容
3. 点击「开始纠错」按钮
4. 查看纠错结果

### 文档上传纠错
1. 选择「文档上传」标签页
2. 拖拽文件到上传区域或点击选择文件
3. 支持的格式：.txt、.doc、.docx、.pdf
4. 点击「开始纠错」按钮
5. 查看纠错结果

### 文本对比工具
1. 点击页面底部的「文本对比」工具
2. 在左侧输入原始文本，右侧输入对比文本
3. 点击「开始对比」查看差异
4. 支持行级和字符级差异高亮显示

### 结果查看
- **纠错后文本**：显示完整的纠错结果
- **对比显示**：原文与纠错后文本的并排对比
- **详细信息**：具体的错误类型和修正说明
- **复制功能**：一键复制纠错结果
- **差异统计**：显示修改、新增、删除的行数统计

## API接口

### 文本纠错
```
POST /api/correct-text
Content-Type: application/json

{
  "text": "需要纠错的文本内容"
}
```

### 文件纠错
```
POST /api/correct-file
Content-Type: multipart/form-data

file: 上传的文件
```

### 健康检查
```
GET /api/health
```

### 状态检查
```
GET /api/status
```

## 项目结构

```
traeint_resp/
├── package.json              # 项目配置和依赖
├── server.js                # 服务器主文件
├── README.md                # 项目说明文档
├── ARCHITECTURE.md          # 架构设计文档
├── middleware/              # 中间件目录
│   ├── errorHandler.js      # 错误处理中间件
│   ├── logger.js            # 日志系统
│   └── validator.js         # 输入验证中间件
├── routes/                  # 路由目录
│   └── logs.js              # 日志管理路由
├── public/                  # 静态资源目录
│   ├── index.html           # 主页面
│   ├── styles.css           # 样式文件
│   ├── script.js            # 主应用脚本
│   ├── config.js            # 配置文件
│   ├── apiClient.js         # API通信模块
│   ├── textProcessor.js     # 文本处理模块
│   ├── uiManager.js         # 界面管理模块
│   ├── errorhandler.js      # 前端错误处理模块
│   ├── cacheManager.js      # 缓存管理模块
│   ├── userExperienceManager.js  # 用户体验模块
│   ├── textDiffModule.js    # 文本对比模块
│   ├── eventbus.js          # 事件总线
│   ├── dependencyContainer.js # 依赖注入容器
│   └── toolsController.js   # 工具控制器
└── uploads/                 # 文件上传临时目录（自动创建）
```

## 错误类型说明

系统能够识别和纠正以下类型的错误：
- **错别字**：汉字书写错误
- **语法错误**：语法结构问题
- **标点符号**：标点使用不当
- **用词不当**：词汇选择问题
- **冗余表达**：重复或多余的表达

## 注意事项

1. **文本长度限制**：单次纠错文本不超过2000字符
2. **文件大小限制**：上传文件不超过10MB
3. **支持格式**：仅支持 .txt、.doc、.docx、.pdf 格式
4. **网络要求**：需要稳定的网络连接以访问科大讯飞API
5. **隐私保护**：上传的文件会在处理完成后自动删除
6. **端口配置**：默认运行在3003端口，可在config中修改

## 故障排除

### 常见问题

**Q: 纠错服务不可用**
A: 检查网络连接和科大讯飞API服务状态

**Q: 文件上传失败**
A: 确认文件格式和大小是否符合要求

**Q: 页面无法访问**
A: 确认服务器是否正常启动，端口3003是否被占用

**Q: 文本对比功能异常**
A: 检查浏览器控制台错误信息，确认模块是否正确加载

**Q: 消息提示不显示**
A: 已修复消息提示功能，确保页面刷新后重试

### 日志查看
服务器运行时会在控制台输出详细的日志信息，包括：
- 服务启动信息
- API调用状态
- 错误信息
- 文件处理状态
- 模块加载状态

## 开发指南

### 代码质量
- **模块化设计**：每个功能模块独立，便于维护和测试
- **依赖注入**：使用依赖容器管理服务生命周期
- **配置管理**：统一的配置文件管理所有参数
- **错误处理**：完善的错误捕获和用户友好的提示
- **性能优化**：智能缓存、节流处理、异步操作

### 维护建议
1. **定期清理**：使用 `npm run clean` 清理上传文件
2. **代码审查**：确保代码符合项目规范
3. **测试覆盖**：使用 `npm run test` 进行功能测试
4. **文档更新**：使用 `npm run docs` 生成最新文档
5. **健康检查**：使用 `npm run health` 检查服务状态

### 扩展开发
- **新增模块**：参考现有模块结构，实现标准接口
- **服务注册**：通过依赖容器注册新服务
- **API集成**：通过APIClient模块统一管理外部API
- **UI组件**：通过UIManager扩展界面功能
- **缓存策略**：利用CacheManager优化性能
- **事件通信**：使用EventBus进行模块间通信

### 新功能亮点
- **智能文本对比**：支持行级和字符级差异检测
- **模块化架构**：完全重构的模块化设计
- **依赖注入**：现代化的服务管理方式
- **用户体验**：完善的消息提示和错误处理
- **工具集成**：统一的工具管理界面

## 版本信息

- **当前版本**：2.1.0
- **发布日期**：2025年1月
- **维护团队**：广西心连心信息化组
- **架构升级**：模块化重构，新增文本对比、依赖注入等功能
- **主要更新**：
  - 新增文本对比工具
  - 完善错误处理和消息提示
  - 模块化架构重构
  - 依赖注入容器
  - 工具控制器统一管理

## 技术支持

如有技术问题或功能建议，请联系广西心连心信息化组。

### 快速命令参考
```bash
npm run dev     # 启动开发服务器
npm run test    # 运行测试
npm run docs    # 生成文档
npm run clean   # 清理文件
npm run health  # 健康检查
```

---

**© 2025 广西心连心信息化组 - 内部文本纠错小程序 v2.1.0**